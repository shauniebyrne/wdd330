(()=>{"use strict";function e(e,t=1){return 1===t&&([e,t]=[t,e]),Math.floor((t-e+1)*Math.random())+e}function t(t){for(let s=t.length;s;s--){let o=e(s)-1;[t[s-1],t[o]]=[t[o],t[s-1]]}}const s={score:document.querySelector("#score strong"),question:document.querySelector("#question"),result:document.querySelector("#result"),info:document.querySelector("#info"),start:document.querySelector("#start"),response:document.querySelector("#response"),timer:document.querySelector("#timer strong"),hiScore:document.querySelector("#hiScore strong"),render(e,t,s){for(const t in s)e.setAttribute(t,s[t]);e.innerHTML=t},show(e){e.style.display="block"},hide(e){e.style.display="none"},setup(){this.show(this.question),this.show(this.response),this.show(this.result),this.hide(this.start),this.render(this.score,o.score),this.render(this.result,""),this.render(this.info,""),this.render(this.hiScore,o.hiScore())},teardown(){this.hide(this.question),this.hide(this.response),this.show(this.start),this.render(this.hiScore,o.hiScore())},buttons:e=>e.map((e=>`<button>${e}</button>`)).join("")},o={start(e){console.log("start() invoked"),this.score=0,this.questions=[...e],s.setup(),this.secondsRemaining=20,this.timer=setInterval(this.countdown,1e3),this.ask()},countdown(){o.secondsRemaining--,s.render(s.timer,o.secondsRemaining),o.secondsRemaining<=0&&o.gameOver()},ask(e){if(console.log("ask() invoked"),this.questions.length>2){t(this.questions),this.question=this.questions.pop();const e=[this.questions[0].realName,this.questions[1].realName,this.question.realName];t(e);const o=`What is ${this.question.name}'s real name?`;s.render(s.question,o),s.render(s.response,s.buttons(e))}else this.gameOver()},check(e){console.log("check(event) invoked");const t=e.target.textContent,o=this.question.realName;t===o?(console.log("correct"),s.render(s.result,"Correct!",{class:"correct"}),this.score++,s.render(s.score,this.score)):(console.log("wrong"),s.render(s.result,`Wrong! The correct answer was ${o}`,{class:"wrong"})),this.ask()},gameOver(){console.log("gameOver() invoked"),s.render(s.info,`Game Over, you scored ${this.score} point${1!==this.score?"s":""}`),s.teardown(),clearInterval(this.timer)},hiScore(){const e=localStorage.getItem("highScore")||0;return(this.score>e||0===e)&&localStorage.setItem("highScore",this.score),localStorage.getItem("highScore")}};fetch("http://spbooks.github.io/questions.json").then((e=>e.json())).then((e=>{s.start.addEventListener("click",(()=>o.start(e.questions)),!1),s.response.addEventListener("click",(e=>o.check(e)),!1)}))})();